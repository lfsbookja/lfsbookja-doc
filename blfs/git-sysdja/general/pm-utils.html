<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      pm-utils-1.4.1
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL-NS Stylesheets Vsnapshot" />
    <style type="text/css">
    /*<![CDATA[*/
    body { background-image: url('images/draft.png');
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
     }
    /*]]>*/
    </style>
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r12.0-1055+">
    <div class="navheader">
      <h4>
        Beyond Linux<sup>®</sup> From Scratch <span class=
        "phrase">(systemd</span> 版) - Version r12.0-1055+
      </h4>
      <h3>
        第12章 システムユーティリティ
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="pciutils.html" title=
          "pciutils-3.10.0">戻る</a>
          <p>
            pciutils-3.10.0
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="raptor.html" title="Raptor-2.0.16">次へ</a>
          <p>
            Raptor-2.0.16
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="sysutils.html" title=
          "第12章 システムユーティリティ">上に戻る</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch  (systemd  版) - Version r12.0-1055+">ホーム</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="ja" xml:lang="ja">
      <h1 class="sect1">
        <a id="pm-utils" name="pm-utils"></a>pm-utils-1.4.1
      </h1>
      <div class="package" lang="ja" xml:lang="ja">
        <h2 class="sect2">
          Power Management Utilities の概要
        </h2>
        <p>
          The <span class="application">Power Management Utilities</span>
          provide simple shell command line tools to suspend and hibernate
          the computer. They can be used to run user supplied scripts on
          suspend and resume.
        </p>
        <div class="admon note">
          <img alt="[注記]" src="../images/note.png" />
          <h3>
            注記
          </h3>
          <p>
            On a system using <span class="application">systemd</span> as the
            init system, <span class="application">systemd</span> already
            provides this functionality. As a result, this package is
            probably not needed, and it may conflict with <span class=
            "application">systemd</span>. Read the documentation for
            <code class="filename">suspend.target</code> and <code class=
            "filename">hibernate.target</code> in the man page <code class=
            "filename">systemd.special(7)</code> for more details.
          </p>
        </div>
        <div class="admon note">
          <img alt="[注記]" src="../images/note.png" />
          <h3>
            注記
          </h3>
          <p>
            LFS や依存パッケージが本ブックに示す最新安定バージョンでなかった場合には、BLFS
            開発版においては、パッケージのビルドや処理実行が適切に行われないことがあります。
          </p>
        </div>
        <h3>
          パッケージ情報
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                ダウンロード (HTTP): <a class="ulink" href=
                "https://pm-utils.freedesktop.org/releases/pm-utils-1.4.1.tar.gz">
                https://pm-utils.freedesktop.org/releases/pm-utils-1.4.1.tar.gz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                ダウンロード MD5 sum: 1742a556089c36c3a89eb1b957da5a60
              </p>
            </li>
            <li class="listitem">
              <p>
                ダウンロードサイズ: 204 KB
              </p>
            </li>
            <li class="listitem">
              <p>
                必要ディスク容量: 1.6 MB
              </p>
            </li>
            <li class="listitem">
              <p>
                概算ビルド時間: 0.1 SBU
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Additional Downloads
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                Required patch: <a class="ulink" href=
                "https://www.linuxfromscratch.org/patches/blfs/svn/pm-utils-1.4.1-bugfixes-1.patch">
                https://www.linuxfromscratch.org/patches/blfs/svn/pm-utils-1.4.1-bugfixes-1.patch</a>
              </p>
            </li>
          </ul>
        </div>
        <h3>
          Power Management Utilities の依存パッケージ
        </h3>
        <h4>
          任意
        </h4>
        <p class="optional">
          <a class="xref" href="../pst/xmlto.html" title=
          "xmlto-0.0.28">xmlto-0.0.28</a> (man ページ生成のため)
        </p>
        <h4>
          任意 （実行時）
        </h4>
        <p class="optional">
          <a class="xref" href="hdparm.html" title=
          "Hdparm-9.65">Hdparm-9.65</a>, <a class="xref" href=
          "../basicnet/wireless_tools.html" title=
          "Wireless Tools-29">Wireless Tools-29</a>, <a class="ulink" href=
          "https://www.kernel.org/pub/software/network/ethtool/">ethtool</a>,
          <a class="ulink" href=
          "https://ftp.debian.org/debian/pool/main/v/vbetool/">vbetool</a>
        </p>
      </div>
      <div class="kernel" lang="ja" xml:lang="ja">
        <h2 class="sect2">
          <a id="pm-utils-kernel" name="pm-utils-kernel"></a>カーネルの設定
        </h2>
        <p>
          必要に応じて、以下に示すカーネル設定オプションを有効にし、カーネルを再コンパイルします。
        </p>
        <pre class="screen"><span class=
        "blue">P</span>ower management and ACPI options ---&gt;
  [*] <span class=
"blue">S</span>uspend to RAM and standby                                       [SUSPEND]
  [*] H<span class=
"blue">i</span>bernation (aka 'suspend to disk')                          [HIBERNATION]</pre>
        <p>
          Suspend to RAM allows the system to enter sleep states in which
          main memory is powered and thus its contents are preserved. The
          method cuts power to most parts of the machine aside from the RAM.
          Because of the large power savings, it is advisable for laptops to
          automatically enter this mode when the computer is running on
          batteries and the lid is closed (or the user is inactive for some
          time).
        </p>
        <p>
          Suspend to disk (Hibernation) saves the machine's state into swap
          space and completely powers off the machine. When the machine is
          powered on, the state is restored. Until then, there is zero power
          consumption. Suspend to RAM and hibernation are normally
          appropriate for portable devices such as laptops, but can be used
          on workstations. The capability is not really appropriate for
          servers.
        </p>
        <p>
          To use hibernation, the kernel parameter
          resume=/dev/&lt;swap_partition&gt; has to be used on the kernel
          command line (in grub.cfg). The swap partition should be at least
          the size of the physical RAM on the system.
        </p>
      </div>
      <div class="installation" lang="ja" xml:lang="ja">
        <h2 class="sect2">
          Power Management Utilities のインストール
        </h2>
        <p>
          First, fix several bugs and a couple of incompatibilities with
          newer kernels:
        </p>
        <pre class="userinput"><kbd class=
        "command">patch -Np1 -i ../pm-utils-1.4.1-bugfixes-1.patch</kbd></pre>
        <p>
          以下のコマンドを実行して <span class="application">Power Management
          Utilities</span> をビルドします。
        </p>
        <pre class="userinput"><kbd class=
        "command">./configure --prefix=/usr     \
            --sysconfdir=/etc \
            --docdir=/usr/share/doc/pm-utils-1.4.1 &amp;&amp;
make</kbd></pre>
        <p>
          このパッケージにテストスイートはありません。
        </p>
        <p>
          <code class="systemitem">root</code> ユーザーになって以下を実行します。
        </p>
        <pre class="root"><kbd class="command">make install</kbd></pre>
        <p>
          <a class="xref" href="../pst/xmlto.html" title=
          "xmlto-0.0.28">xmlto-0.0.28</a> をインストールしていない場合は <code class=
          "systemitem">root</code> ユーザーになって、生成済の man ページをコピーします。
        </p>
        <pre class="root"><kbd class=
        "command">install -v -m644 man/*.1 /usr/share/man/man1 &amp;&amp;
install -v -m644 man/*.8 /usr/share/man/man8 &amp;&amp;
ln -sv pm-action.8 /usr/share/man/man8/pm-suspend.8 &amp;&amp;
ln -sv pm-action.8 /usr/share/man/man8/pm-hibernate.8 &amp;&amp;
ln -sv pm-action.8 /usr/share/man/man8/pm-suspend-hybrid.8</kbd></pre>
      </div>
      <div class="configuration" lang="ja" xml:lang="ja">
        <h2 class="sect2">
          Power Management Utilities の設定
        </h2>
        <p>
          Suspend or resume functionality can be easily modified by
          installing files into the <code class=
          "filename">/etc/pm/sleep.d</code> directory. These files, known as
          hooks, are run when the system is put into a sleep state or
          resumed. Default hooks are located in <code class=
          "filename">/usr/lib/pm-utils/sleep.d</code>, and user hooks should
          be put in <code class="filename">/etc/pm/sleep.d</code>. See the
          pm-action(8) man page for more information.
        </p>
        <p>
          In order to use hibernation with <span class=
          "application">GRUB</span> and a swap partition, you need to add
          kernel parameter <code class="literal">resume=<em class=
          "replaceable"><code>swap_partition</code></em></code> (e.g.
          <code class="literal">resume=/dev/sda1</code>) to the kernel line
          in the <code class="filename">/boot/grub/grub.cfg</code>
          configuration file.
        </p>
      </div>
      <div class="content" lang="ja" xml:lang="ja">
        <h2 class="sect2">
          パッケージ構成
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">インストールプログラム:</strong> <span class=
              "segbody">on_ac_power, pm-hibernate, pm-is-supported,
              pm-powersave, pm-suspend, pm-suspend-hybrid</span>
            </div>
            <div class="seg">
              <strong class="segtitle">インストールライブラリ:</strong> <span class=
              "segbody">なし</span>
            </div>
            <div class="seg">
              <strong class="segtitle">インストールディレクトリ:</strong> <span class=
              "segbody">/etc/pm, /usr/lib/pm-utils,
              /usr/share/doc/pm-utils-1.4.1</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            概略説明
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="on_ac_power" name="on_ac_power"></a><span class=
                    "term"><span class=
                    "command"><strong>on_ac_power</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a script that determines whether the system is running
                    on AC power (rather than a battery)
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="pm-hibernate" name="pm-hibernate"></a><span class=
                    "term"><span class=
                    "command"><strong>pm-hibernate</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a symlink to pm-action script that puts the computer
                    into hibernate mode (the system is fully powered off and
                    system state is saved to disk)
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="pm-is-supported" name=
                    "pm-is-supported"></a><span class="term"><span class=
                    "command"><strong>pm-is-supported</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a script that checks whether power management features
                    such as suspend and hibernate are supported
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="pm-powersave" name="pm-powersave"></a><span class=
                    "term"><span class=
                    "command"><strong>pm-powersave</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a script that puts the computer into powersaving (low
                    power) mode
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="pm-suspend" name="pm-suspend"></a><span class=
                    "term"><span class=
                    "command"><strong>pm-suspend</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a symlink to pm-action script that puts the computer
                    into suspend mode (most devices are shut down and system
                    state is saved in RAM)
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="pm-suspend-hybrid" name=
                    "pm-suspend-hybrid"></a><span class="term"><span class=
                    "command"><strong>pm-suspend-hybrid</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a symlink to pm-action script that puts the computer
                    into hybrid-suspend mode (the system does everything it
                    needs to hibernate, but suspends instead of shutting
                    down)
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="pciutils.html" title=
          "pciutils-3.10.0">戻る</a>
          <p>
            pciutils-3.10.0
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="raptor.html" title="Raptor-2.0.16">次へ</a>
          <p>
            Raptor-2.0.16
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="sysutils.html" title=
          "第12章 システムユーティリティ">上に戻る</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch  (systemd  版) - Version r12.0-1055+">ホーム</a>
        </li>
      </ul>
    </div>
  </body>
</html>
