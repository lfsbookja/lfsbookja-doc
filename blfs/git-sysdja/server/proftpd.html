<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=utf-8" />
    <title>
      ProFTPD-1.3.8b
    </title>
    <link rel="stylesheet" type="text/css" href="../stylesheets/lfs.css" />
    <meta name="generator" content="DocBook XSL-NS Stylesheets Vsnapshot" />
    <style type="text/css">
    /*<![CDATA[*/
    body { background-image: url('images/draft.png');
       background-repeat: no-repeat;
       background-position: top left;
       /* The following properties make the watermark "fixed" on the page. */
       /* I think that's just a bit too distracting for the reader... */
       /* background-attachment: fixed; */
       /* background-position: center center; */
     }
    /*]]>*/
    </style>
    <link rel="stylesheet" href="../stylesheets/lfs-print.css" type=
    "text/css" media="print" />
  </head>
  <body class="blfs" id="blfs-r12.0-1055+">
    <div class="navheader">
      <h4>
        Beyond Linux<sup>®</sup> From Scratch <span class=
        "phrase">(systemd</span> 版) - Version r12.0-1055+
      </h4>
      <h3>
        第20章 代表的なサーバー
      </h3>
      <ul>
        <li class="prev">
          <a accesskey="p" href="kea.html" title=
          "Kea 2.4.1 DHCP Server">戻る</a>
          <p>
            Kea 2.4.1 DHCP Server
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="vsftpd.html" title="vsftpd-3.0.5">次へ</a>
          <p>
            vsftpd-3.0.5
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="majorservers.html" title=
          "第20章 代表的なサーバー">上に戻る</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch  (systemd  版) - Version r12.0-1055+">ホーム</a>
        </li>
      </ul>
    </div>
    <div class="sect1" lang="ja" xml:lang="ja">
      <h1 class="sect1">
        <a id="proftpd" name="proftpd"></a>ProFTPD-1.3.8b
      </h1>
      <div class="package" lang="ja" xml:lang="ja">
        <h2 class="sect2">
          ProFTPD の概要
        </h2>
        <p>
          <span class="application">ProFTPD</span> パッケージは、セキュアで設定変更が容易な FTP
          デーモンを提供します。 ネットワークに対して大量のファイルアーカイブを提供しようとする場合に活用することができます。
        </p>
        <div class="admon note">
          <img alt="[注記]" src="../images/note.png" />
          <h3>
            注記
          </h3>
          <p>
            LFS や依存パッケージが本ブックに示す最新安定バージョンでなかった場合には、BLFS
            開発版においては、パッケージのビルドや処理実行が適切に行われないことがあります。
          </p>
        </div>
        <h3>
          パッケージ情報
        </h3>
        <div class="itemizedlist">
          <ul class="compact">
            <li class="listitem">
              <p>
                ダウンロード (HTTP): <a class="ulink" href=
                "https://github.com/proftpd/proftpd/archive/v1.3.8b/proftpd-1.3.8b.tar.gz">
                https://github.com/proftpd/proftpd/archive/v1.3.8b/proftpd-1.3.8b.tar.gz</a>
              </p>
            </li>
            <li class="listitem">
              <p>
                ダウンロード MD5 sum: 778cdeeac86e1d26451112bb7d4662af
              </p>
            </li>
            <li class="listitem">
              <p>
                ダウンロードサイズ: 19 MB
              </p>
            </li>
            <li class="listitem">
              <p>
                必要ディスク容量: 66 MB
              </p>
            </li>
            <li class="listitem">
              <p>
                概算ビルド時間: 0.3 SBU
              </p>
            </li>
          </ul>
        </div>
        <h3>
          ProFTPD の依存パッケージ
        </h3>
        <h4>
          任意
        </h4>
        <p class="optional">
          <a class="xref" href="../postlfs/libcap.html" title=
          "libcap-2.69 with PAM">libcap-2.69 with PAM</a>, <a class="xref"
          href="../general/libssh2.html" title=
          "libssh2-1.11.0">libssh2-1.11.0</a>, <a class="xref" href=
          "../postlfs/linux-pam.html" title=
          "Linux-PAM-1.5.3">Linux-PAM-1.5.3</a>, <a class="xref" href=
          "mariadb.html" title="MariaDB-10.11.6">MariaDB-10.11.6</a> or
          <a class="ulink" href="https://www.mysql.com/">MySQL</a>, <a class=
          "xref" href="../general/pcre.html" title="PCRE-8.45">PCRE-8.45</a>,
          <a class="xref" href="postgresql.html" title=
          "PostgreSQL-16.1">PostgreSQL-16.1</a>, and <a class="ulink" href=
          "https://metacpan.org/pod/Net::SSH2">Net::SSH2</a>
        </p>
      </div>
      <div class="installation" lang="ja" xml:lang="ja">
        <h2 class="sect2">
          ProFTPD のインストール
        </h2>
        <p>
          セキュリティ上の理由から <span class="application">ProFTPD</span>
          のインストールにあたっては、非特権ユーザーおよびグループを用いる必要があります。 そこでまずは <code class=
          "systemitem">root</code> ユーザーになって以下を実行します。
        </p>
        <pre class="root"><kbd class=
        "command">groupadd -g 46 proftpd                             &amp;&amp;
useradd -c proftpd -d /srv/ftp -g proftpd \
        -s /usr/bin/proftpdshell -u 46 proftpd     &amp;&amp;

install -v -d -m775 -o proftpd -g proftpd /srv/ftp &amp;&amp;
ln -v -s /usr/bin/false /usr/bin/proftpdshell      &amp;&amp;
echo /usr/bin/proftpdshell &gt;&gt; /etc/shells</kbd></pre>
        <p>
          非特権ユーザーとなって以下を実行することで <span class="application">ProFTPD</span>
          をビルドします。
        </p>
        <pre class="userinput"><kbd class=
        "command">./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/run &amp;&amp;
make</kbd></pre>
        <p>
          This packages does not come with a usable test suite.
        </p>
        <p>
          <code class="systemitem">root</code> ユーザーになって以下を実行します。
        </p>
        <pre class="root"><kbd class=
        "command">make install                                   &amp;&amp;
install -d -m755 /usr/share/doc/proftpd-1.3.8b &amp;&amp;
cp -Rv doc/*     /usr/share/doc/proftpd-1.3.8b</kbd></pre>
      </div>
      <div class="commands" lang="ja" xml:lang="ja">
        <h2 class="sect2">
          コマンド説明
        </h2>
        <p>
          <span class="command"><strong>install -v -d -m775 -o proftpd -g
          proftpd /srv/ftp</strong></span>: <span class=
          "application">ProFTPD</span> のホームディレクトリを生成します。
        </p>
        <p>
          <span class="command"><strong>ln -v -s /usr/bin/false
          /usr/bin/proftpdshell</strong></span>: デフォルトシェルを /bin/false
          へのリンクとします。
        </p>
        <p>
          <span class="command"><strong>echo /usr/bin/proftpdshell &gt;&gt;
          /etc/shells</strong></span>: 互換目的でシェルを登録します。
        </p>
        <div class="admon note">
          <img alt="[注記]" src="../images/note.png" />
          <h3>
            注記
          </h3>
          <p>
            もし設定ファイル内に以下のディレクティブを設定するのであれば、上の２つのコマンドは省略可能です。
          </p>
          <pre class="screen"><code class=
          "literal">RequireValidShell off</code></pre>
          <p>
            デフォルトにおいて proftpd は、ログインするユーザーが適正なシェルを利用するものでなければなりません。 ディレクティブ
            RequireValidShell はその要求を無効化するものです。
            この設定を利用するのは、FTPサーバーを匿名ダウンロード専用とする場合にのみ推奨されるものです。
          </p>
        </div>
        <div class="admon note">
          <img alt="[注記]" src="../images/note.png" />
          <h3>
            注記
          </h3>
          <p>
            Support for most of the dependency packages requires using
            options passed to the <span class=
            "command"><strong>configure</strong></span> script. View the
            output from <span class="command"><strong>./configure
            --help</strong></span> for complete information about enabling
            dependency packages.
          </p>
        </div>
      </div>
      <div class="configuration" lang="ja" xml:lang="ja">
        <h2 class="sect2">
          ProFTPD の設定
        </h2>
        <div class="sect3" lang="ja" xml:lang="ja">
          <h3 class="sect3">
            <a id="proftpd-config" name="proftpd-config"></a>
          </h3>
          <h4 class="title">
            <a id="proftpd-config" name="proftpd-config"></a>設定ファイル
          </h4>
          <p>
            <code class="filename">/etc/proftpd.conf</code>
          </p>
        </div>
        <div class="sect3" lang="ja" xml:lang="ja">
          <h3 class="sect3"></h3>
          <h4 class="title">
            <a id="id58353" name="id58353"></a>設定情報
          </h4>
          <p>
            以下は設定ファイルの例であり、単純にダウンロードだけを行う設定例です。
            これ以外のさまざまな設定については、<span class="application">ProFTPD</span>
            のドキュメントとして、<code class="filename">/usr/share/doc/proftpd</code>
            にあるものや Webサイト <a class="ulink" href=
            "http://www.proftpd.org/">http://www.proftpd.org/</a> を参照してください。
          </p>
          <pre class="root"><kbd class=
          "command">cat &gt; /etc/proftpd.conf &lt;&lt; "EOF"
<code class="literal"># This is a basic ProFTPD configuration file
# It establishes a single server and a single anonymous login.

ServerName                      "ProFTPD Default Installation"
ServerType                      standalone
DefaultServer                   on

# Port 21 is the standard FTP port.
Port                            21
# Umask 022 is a good standard umask to prevent new dirs and files
# from being group and world writable.
Umask                           022

# To prevent DoS attacks, set the maximum number of child processes
# to 30.  If you need to allow more than 30 concurrent connections
# at once, simply increase this value.  Note that this ONLY works
# in standalone mode, in inetd mode you should use an inetd server
# that allows you to limit maximum number of processes per service

MaxInstances                    30

# Set the user and group that the server normally runs at.
User                            proftpd
Group                           proftpd

# To cause every FTP user to be "jailed" (chrooted) into their home
# directory, uncomment this line.
#DefaultRoot ~


# Normally, files should be overwritable.
&lt;Directory /*&gt;
  AllowOverwrite                on
&lt;/Directory&gt;

# A basic anonymous configuration, no upload directories.
&lt;Anonymous ~proftpd&gt;
  User                          proftpd
  Group                         proftpd
  # Clients should be able to login with "anonymous" as well as "proftpd"
  UserAlias                     anonymous proftpd

  # Limit the maximum number of anonymous logins
  MaxClients                    10

  # 'welcome.msg' should be displayed at login, and '.message' displayed
  # in each newly chdired directory.
  DisplayLogin                  welcome.msg
  DisplayChdir                  .message

  # Limit WRITE everywhere in the anonymous chroot
  &lt;Limit WRITE&gt;
    DenyAll
  &lt;/Limit&gt;
&lt;/Anonymous&gt;</code>
EOF</kbd></pre>
        </div>
        <div class="sect3" lang="ja" xml:lang="ja">
          <h3 class="sect3">
            <a id="proftpd-init" name="proftpd-init"></a>
          </h3>
          <h4 class="title">
            <a id="proftpd-init" name="proftpd-init"></a> <span class=
            "phrase">Systemd Unit</span>
          </h4>
          <p>
            <a class="xref" href="../introduction/systemd-units.html" title=
            "BLFS Systemd ユニット">blfs-systemd-units-20231205</a> パッケージに含まれる
            <span class="phrase"><code class=
            "filename">proftpd.service</code>ユニット</span>をインストールします。
          </p>
          <pre class="root"><kbd class=
          "command">make install-proftpd</kbd></pre>
        </div>
      </div>
      <div class="content" lang="ja" xml:lang="ja">
        <h2 class="sect2">
          パッケージ構成
        </h2>
        <div class="segmentedlist">
          <div class="seglistitem">
            <div class="seg">
              <strong class="segtitle">インストールプログラム:</strong> <span class=
              "segbody">ftpasswd, ftpcount, ftpdctl, ftpmail, ftpquota,
              ftpscrub, ftpshut, ftptop, ftpwho, in.proftpd (proftpd
              へのシンボリックリンク), proftpd, prxs</span>
            </div>
            <div class="seg">
              <strong class="segtitle">インストールライブラリ:</strong> <span class=
              "segbody">なし</span>
            </div>
            <div class="seg">
              <strong class="segtitle">インストールディレクトリ:</strong> <span class=
              "segbody">/usr/{include,lib}/proftpd,
              /usr/share/doc/proftpd-1.3.8b, /srv/ftp</span>
            </div>
          </div>
        </div>
        <div class="variablelist">
          <h3>
            概略説明
          </h3>
          <table border="0" class="variablelist">
            <colgroup>
              <col align="left" valign="top" />
              <col />
            </colgroup>
            <tbody>
              <tr>
                <td>
                  <p>
                    <a id="proftpd-prog" name="proftpd-prog"></a><span class=
                    "term"><span class=
                    "command"><strong>proftpd</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    FTP デーモン。
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ftpcount" name="ftpcount"></a><span class=
                    "term"><span class=
                    "command"><strong>ftpcount</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    現在の接続数を表示します。
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ftpdctl" name="ftpdctl"></a><span class=
                    "term"><span class=
                    "command"><strong>ftpdctl</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    実行中の proftpd デーモンを制御します。
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ftpasswd" name="ftpasswd"></a><span class=
                    "term"><span class=
                    "command"><strong>ftpasswd</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    AuthUserFiles と AuthGroupFiles に対する正しい書式を生成し制御するための Perl
                    スクリプト。
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ftpmail" name="ftpmail"></a><span class=
                    "term"><span class=
                    "command"><strong>ftpmail</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    proftpd の TransferLog に基づいて電子メール送信を行うための Perl スクリプト。
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ftpquota" name="ftpquota"></a><span class=
                    "term"><span class=
                    "command"><strong>ftpquota</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a Perl script designed to create and manage limits and
                    tally files for the mod_quotatab + mod_quotatab_file
                    module combination for proftpd
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ftpscrub" name="ftpscrub"></a><span class=
                    "term"><span class=
                    "command"><strong>ftpscrub</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    provides a way to scrub the scoreboard file on demand
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ftpshut" name="ftpshut"></a><span class=
                    "term"><span class=
                    "command"><strong>ftpshut</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    shuts down all <span class="application">proftpd</span>
                    servers at a given time
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ftptop" name="ftptop"></a><span class=
                    "term"><span class=
                    "command"><strong>ftptop</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    displays running status on connections
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="ftpwho" name="ftpwho"></a><span class=
                    "term"><span class=
                    "command"><strong>ftpwho</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    shows current process information for each session
                  </p>
                </td>
              </tr>
              <tr>
                <td>
                  <p>
                    <a id="prxs" name="prxs"></a><span class=
                    "term"><span class=
                    "command"><strong>prxs</strong></span></span>
                  </p>
                </td>
                <td>
                  <p>
                    is a Perl script designed to compile and install
                    third-party modules, from source code, as DSO modules for
                    the installed proftpd
                  </p>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="navfooter">
      <ul>
        <li class="prev">
          <a accesskey="p" href="kea.html" title=
          "Kea 2.4.1 DHCP Server">戻る</a>
          <p>
            Kea 2.4.1 DHCP Server
          </p>
        </li>
        <li class="next">
          <a accesskey="n" href="vsftpd.html" title="vsftpd-3.0.5">次へ</a>
          <p>
            vsftpd-3.0.5
          </p>
        </li>
        <li class="up">
          <a accesskey="u" href="majorservers.html" title=
          "第20章 代表的なサーバー">上に戻る</a>
        </li>
        <li class="home">
          <a accesskey="h" href="../index.html" title=
          "Beyond Linux® From Scratch  (systemd  版) - Version r12.0-1055+">ホーム</a>
        </li>
      </ul>
    </div>
  </body>
</html>
